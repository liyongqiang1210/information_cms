<!--_meta 作为公共模版分离出去-->
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="Bookmark" href="/favicon.ico">
<link rel="Shortcut Icon" href="/favicon.ico" />
<!--[if lt IE 9]>
<script type="text/javascript" src="lib/html5shiv.js"></script>
<script type="text/javascript" src="lib/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css"
	href="http://localhost:8080/Information_cms/static/h-ui/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css"
	href="http://localhost:8080/Information_cms/static/h-ui.admin/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css"
	href="http://localhost:8080/Information_cms/lib/Hui-iconfont/1.0.8/iconfont.css" />
<link rel="stylesheet" type="text/css"
	href="http://localhost:8080/Information_cms/static/h-ui.admin/skin/default/skin.css"
	id="skin" />
<link rel="stylesheet" type="text/css"
	href="http://localhost:8080/Information_cms/static/h-ui.admin/css/style.css" />
<!--[if IE 6]>
<script type="text/javascript" src="lib/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script>
<![endif]-->
<!--/meta 作为公共模版分离出去-->

<title>新建网站角色 - 管理员管理 - H-ui.admin v3.1</title>
<meta name="keywords"
	content="H-ui.admin v3.1,H-ui网站后台模版,后台模版下载,后台管理系统模版,HTML后台模版下载">
<meta name="description"
	content="H-ui.admin v3.1，是一款由国人开发的轻量级扁平化网站后台模板，完全免费开源的网站后台管理系统模版，适合中小型CMS后台系统。">
</head>
<body>
	<article class="page-container">
		<form class="form form-horizontal" id="form-admin-role-add">
			<div class="row cl">
				<input type="text" class="input-text" id="permission-id" hidden="hidden"> <label
					class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>权限名称：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" class="input-text" id="permission-name">
				</div>
			</div>
			<input type="text" id="permission-type-hidden" hidden="hidden">
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-3">权限类型：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<select id="permission-type">
						<option id="menu" class="option" value="menu">菜单</option>
						<option id="button" class="option" value="button">按钮</option>
					</select>
				</div>
			</div>
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-3">权限url：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" class="input-text" id="permission-url">
				</div>
			</div>
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-3">权限字段：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" class="input-text" id="permission-string">
				</div>
			</div>
			<input type="text" id="available" hidden="hidden">
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-3">是否可用：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="radio" id="1" name="available" checked="checked" value="1">是
					<input type="radio" id="0" name="available" value="0">否
				</div>
			</div>
			<div class="row cl">
				<div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-3">
					<button type="button" class="btn btn-success radius"
						id="admin-permission-save" name="admin-permission-save">
						<i class="icon-ok"></i> 确定
					</button>
				</div>
			</div>
		</form>
	</article>

	<!--_footer 作为公共模版分离出去-->
	<script type="text/javascript"
		src="http://localhost:8080/Information_cms/lib/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript"
		src="http://localhost:8080/Information_cms/lib/layer/2.4/layer.js"></script>
	<script type="text/javascript"
		src="http://localhost:8080/Information_cms/static/h-ui/js/H-ui.min.js"></script>
	<script type="text/javascript"
		src="http://localhost:8080/Information_cms/static/h-ui.admin/js/H-ui.admin.js"></script>
	<!--/_footer 作为公共模版分离出去-->

	<!--请在下方写此页面业务相关的脚本-->
	<script type="text/javascript"
		src="http://localhost:8080/Information_cms/lib/jquery.validation/1.14.0/jquery.validate.js"></script>
	<script type="text/javascript"
		src="http://localhost:8080/Information_cms/lib/jquery.validation/1.14.0/validate-methods.js"></script>
	<script type="text/javascript"
		src="http://localhost:8080/Information_cms/lib/jquery.validation/1.14.0/messages_zh.js"></script>
	<script type="text/javascript">
		$(function() {
			$(".permission-list dt input:checkbox").click(
					function() {
						$(this).closest("dl").find("dd input:checkbox").prop(
								"checked", $(this).prop("checked"));
					});
			$(".permission-list2 dd input:checkbox")
					.click(
							function() {
								var l = $(this).parent().parent().find(
										"input:checked").length;
								var l2 = $(this).parents(".permission-list")
										.find(".permission-list2 dd").find(
												"input:checked").length;
								if ($(this).prop("checked")) {
									$(this).closest("dl").find(
											"dt input:checkbox").prop(
											"checked", true);
									$(this).parents(".permission-list").find(
											"dt").first()
											.find("input:checkbox").prop(
													"checked", true);
								} else {
									if (l == 0) {
										$(this).closest("dl").find(
												"dt input:checkbox").prop(
												"checked", false);
									}
									if (l2 == 0) {
										$(this).parents(".permission-list")
												.find("dt").first().find(
														"input:checkbox").prop(
														"checked", false);
									}
								}
							});


			/* 编辑权限确定按钮 */
			$("#admin-permission-save")
					.click(
							function() {
								var id = $("#permission-id").val();
								var name = $("#permission-name").val();
								var type = $("#permission-type option:selected").val(); // 获取选中的下拉列表值
								var url = $("#permission-url").val();
								var str = $("#permission-string").val();
								var available = $("input[name='available']:checked").prop("id"); // 获取单选框的值
								$
										.ajax({
											type : "POST",
											url : "http://localhost:8080/Information_cms/resource/updateResource.do",
											data : {
												id : id,
												name : name,
												type : type,
												url : url,
												permission : str,
												available : available
											},
											dateType : "json",
											success : function(data) {
												// 注意此处必须是先刷新父页面然后再关闭子页面，不然的话父页面不刷新
												// 刷新父页面
												window.parent.location.reload();
												// 关闭页面
												var index = parent.layer
														.getFrameIndex(window.name);
												parent.layer.close(index);
											},
											error : function(data) {
												alert("数据格式错误");
											}
										});
							});

		});
	</script>
	<!--/请在上方写此页面业务相关的脚本-->
</body>
</html>